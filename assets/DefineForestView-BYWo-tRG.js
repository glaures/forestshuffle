import{F as C}from"./@fortawesome-DKljILeY.js";import{_ as k,u as a,a as g,F as O}from"./index-_BvMJblj.js";import{e as b}from"./vue-gtag-CcRHk7_p.js";import{R as p,J as l,K as d,U as n,W as m,S as y,M as v,F as x,_ as P,G as c,V as w,P as G,a5 as j,a3 as A,a4 as I,N as R}from"./@vue-AvP_IorH.js";import{O as T,M as B}from"./bootstrap-SC8BV6mU.js";import"./vue-router-Bmx0rSJy.js";import"./vue-toastification-D0LTT1LP.js";import"./pinia-DjfVaXg1.js";import"./vue-i18n-xdeHclp_.js";import"./@intlify-Y34EtYYP.js";import"./@vueuse-C7VxYZ8Y.js";import"./@unhead-D5KD6dbc.js";import"./unhead-CJOjMzX7.js";import"./hookable-B8xFkYCm.js";import"./register-service-worker-TYP_X6yW.js";import"./@popperjs-WhmJkuoZ.js";const L={name:"CardAmountEditor",components:{FontAwesomeIcon:C},props:{card:Object,forest:Object},computed:{playerName(){return this.forest.playerName},distributedScoring(){return a().distributedScoring}},methods:{addCard(){g().addCard(this.playerName,this.card.name);const e=this.$t(this.card.name,"en");b("cardAdded",{card:e})},removeCard(){g().removeCard(this.playerName,this.card.name)},paramAdd(e){e.type==="number"?g().addParam(this.playerName,this.card.name,e.name):e.type==="type"?g().addSymbolCount(this.playerName,e.symbol):e.type==="boolean"&&g().toggleParam(this.playerName,this.card.name,e.name)},paramSub(e){e.type==="number"?g().subParam(this.playerName,this.card.name,e.name):e.type==="type"&&g().subSymbolCount(this.playerName,e.symbol)}}},z={class:"row mt-2"},H={class:"fw-bold col-1"},W={key:0},U={class:"col-9 pe-0 text-nowrap overflow-x-hidden"},V=["src"],K=["src"],J={class:"ms-2"},q={class:"col-1 ps-0"},Y={class:"col-1 text-start overflow-x-hidden"},Q={key:0},X={class:"fw-bold offset-1 col-1 d-flex align-items-center"},Z={key:0},ee={key:1},te={key:2},se={key:0,class:"text-success"},ne={key:1,class:"text-danger"},oe={class:"col-8 text-nowrap pe-0"},re=["onClick"],ae=["src","alt"],ie={class:"ps-2"},le={class:"col-1 ps-0"},de=["onClick"];function ce(e,s,o,f,h,t){const u=p("font-awesome-icon");return l(),d(x,null,[n("div",z,[n("div",H,[o.card.count>0?(l(),d("span",W,m(o.card.count)+"×",1)):y("",!0)]),n("div",U,[n("button",{onClick:s[0]||(s[0]=(...i)=>t.addCard&&t.addCard(...i)),class:v(["btn-"+o.card.symbols[0],"w-100 btn btn-primary btn-sm text-start"])},[(l(!0),d(x,null,P(o.card.symbols,(i,r)=>(l(),d("img",{src:"./img/symbols/"+i+".png",height:"20",class:v({"ms-1":r>0})},null,10,V))),256)),o.card.name.startsWith("roe")?(l(),d("img",{key:0,src:"./img/symbols/"+o.card.type+".png",height:"20",class:"ms-1"},null,8,K)):y("",!0),n("span",J,m(e.$t(o.card.name)),1)],2)]),n("div",q,[n("button",{class:"ms-1 btn btn-outline-danger btn-sm",onClick:s[1]||(s[1]=(...i)=>t.removeCard&&t.removeCard(...i))},"×")]),n("div",Y,[o.card.count>0&&o.card.symbols.indexOf("butterfly")<0?(l(),d("span",Q,m(o.card.points),1)):y("",!0)])]),(l(!0),d(x,null,P(o.card.params,(i,r)=>(l(),d("div",{key:i.name},[!i.distributed||t.distributedScoring?(l(),d("div",{key:0,class:v(["mt-1 row",{"mb-3":o.card.params.length===r+1}])},[n("div",X,[o.card.count>0&&i.type==="number"?(l(),d("span",Z,m(i.value),1)):y("",!0),o.card.count>0&&i.type==="type"?(l(),d("span",ee,m(o.forest[i.symbol+"Count"]),1)):y("",!0),o.card.count>0&&i.type==="boolean"?(l(),d("span",te,[i.value?(l(),d("span",se,[c(u,{icon:"check",size:"lg"})])):(l(),d("span",ne,[c(u,{icon:"xmark",size:"lg"})]))])):y("",!0)]),n("div",oe,[n("button",{onClick:E=>t.paramAdd(i),class:v(["btn-"+o.card.symbols[0],"btn btn-sm btn-primary text-start w-100"])},[i.type==="type"?(l(),d("img",{key:0,src:"./img/symbols/"+i.symbol+".png",alt:e.$t(i.symbol),height:"20"},null,8,ae)):y("",!0),n("span",ie,m(e.$t(i.name)),1)],10,re)]),n("div",le,[i.type!=="boolean"?(l(),d("button",{key:0,class:"ms-1 btn btn-outline-danger btn-sm",onClick:E=>t.paramSub(i)}," × ",8,de)):y("",!0)])],2)):y("",!0)]))),128))],64)}const M=k(L,[["render",ce],["__scopeId","data-v-fc78c4e7"]]),S="/img/points.png",me={name:"CardAmountEditorList",components:{CardAmountEditor:M},props:{cards:Array,forest:O,symbol:String,symbol2:String,heading:String},computed:{totalPoints(){return this.symbol==="butterfly"?this.forest.butterflyPoints:this.cards.map(e=>e.points).reduce((e,s)=>s+=e,0)},filteredCards(){let e=this.cards;return a().alpineExpansion||(e=e.filter(s=>s.symbols.indexOf("alps")<0)),a().woodlandEdgeExpansion||(e=e.filter(s=>s.symbols.indexOf("woodlandEdge")<0)),e}}},ue={key:0},ge=["src","alt"],fe=["src","alt"],he={class:"ms-1 fs-5 flex-grow-1"},ye={class:"fs-5 fw-bold"},be=n("img",{src:S,alt:"points",height:"28"},null,-1);function pe(e,s,o,f,h,t){const u=p("CardAmountEditor");return t.filteredCards.length>0?(l(),d("div",ue,[n("div",G(e.$attrs,{class:"d-flex align-items-center"}),[n("img",{src:"./img/symbols/"+o.symbol+".png",height:"24",alt:e.$t(o.heading)},null,8,ge),o.symbol2?(l(),d("img",{key:0,src:"./img/symbols/"+o.symbol2+".png",height:"24",alt:e.$t(o.heading)},null,8,fe)):y("",!0),n("div",he,m(e.$t(o.heading)),1),n("div",ye,[be,w(" "+m(t.totalPoints),1)])],16),(l(!0),d(x,null,P(t.filteredCards,i=>(l(),d("div",{key:"cae_"+i.name,class:"d-block"},[c(u,{card:i,forest:o.forest},null,8,["card","forest"])]))),128))])):y("",!0)}const _e=k(me,[["render",pe]]),ve={name:"FloatingButtons",components:{FontAwesomeIcon:C},emits:["addPlayer","toggleStandings"],computed:{playerCount(){return a().players.length}}},we={class:"wrapper"},xe={class:"d-flex justify-content-around align-items-center"},ke={class:"button-group"};function Pe(e,s,o,f,h,t){const u=p("font-awesome-icon");return l(),d("div",we,[n("div",xe,[n("div",ke,[c(u,{class:v(["btn btn-primary rounded-5 py-2 shadow",{disabled:t.playerCount>=5}]),icon:"user-plus",size:"1x",onClick:s[0]||(s[0]=i=>e.$emit("addPlayer"))},null,8,["class"]),c(u,{class:"ms-1 btn btn-primary rounded-5 py-2 shadow",icon:"list-ol",size:"1x",onClick:s[1]||(s[1]=i=>e.$emit("toggleStandings"))})])])])}const D=k(ve,[["render",Pe],["__scopeId","data-v-60ea775f"]]),Ce="/img/symbols/alps.png",Se="/img/symbols/woodlandEdge.png",Ee={name:"NavigationAndButtons",components:{FloatingButtons:D,FontAwesomeIcon:C},emits:["toggleStandings","startNewGame","resetPlayers"],data(){return{editing:!1}},computed:{distributedScoring(){return a().distributedScoring},alpineExpansion(){return a().alpineExpansion},woodlandEdgeExpansion(){return a().woodlandEdgeExpansion},duererExpansion(){return a().duererExpansion},hobbyPromo(){return a().hobbyPromo},spiel24Promo(){return a().spiel24Promo},forests(){return g().forests},players(){return a().players.map(e=>({...e,points:g().getForestByPlayerName(e.name).points}))},currentPlayer(){return a().currentPlayer},playerNumber(){return a().players.findIndex(e=>e.name===this.currentPlayer.name)+1},points(){return g().getForestByPlayerName(this.currentPlayer.name).points}},methods:{toggleDistributedScoring(){return g().toggleDistributedScoring()},closeMenu(){const e=T.getInstance(document.getElementById("navigation"));e&&e.hide()},addPlayer(){const e=this.$t("player")+" "+(this.players.length+1);g().addForest(e),a().addPlayer(e),this.selectPlayer(e),b("playerAdded",{totalPlayers:a().players.length})},selectPlayer(e){a().selectPlayer(e),this.closeMenu()},updatePlayerName(){this.editing=!1;const e=this.currentPlayer.name,s=document.getElementById("playerNameInput").value;a().updatePlayerName(e,s),g().getForestByPlayerName(e).playerName=s,b("playerNameUpdated",{name:s})},startNewGame(){this.$emit("startNewGame"),this.closeMenu()},resetPlayers(){this.$emit("resetPlayers"),this.closeMenu()},toggleAlpineExpansion(){a().toggleAlpineExpansion(),b("alpineExpansionToggled",{newState:this.alpineExpansion})},toggleWoodlandEdgeExpansion(){a().toggleWoodlandEdgeExpansion(),b("woodlandEdgeExpansion",{newState:this.woodlandEdgeExpansion})},toggleDuererExpansion(){a().toggleDuererExpansion(),b("duererExpansionToggled",{newState:this.duererExpansion})},toggleHobbyPromo(){a().toggleHobbyPromo(),b("hobbyPromoToggled",{newState:this.hobbyPromo})},toggleSpiel24Promo(){a().toggleSpiel24Promo(),b("spiel24Toggled",{newState:this.spiel24Promo})},changeLanguage(e){this.$i18n.locale=e,b("languageChanged",{language:e})}}},N=e=>(A("data-v-5620d261"),e=e(),I(),e),Ne={class:"header d-flex align-items-center py-2 px-3"},Ae={key:0,class:"d-flex justify-content-between align-items-center w-100 pe-2"},Ie={key:0},Fe={class:"ms-1 text-light cursor-pointer"},Be={key:1,class:"d-flex"},Oe=["value"],Me={class:"current-player-text fs-1 d-flex align-items-center"},De=N(()=>n("img",{src:S,alt:"points",height:"34"},null,-1)),$e={id:"navigation",class:"offcanvas offcanvas-start z-9999",tabindex:"-1"},Ge={class:"offcanvas-header"},je={class:"offcanvas-body"},Re={class:"list-group"},Te=["onClick"],Le={class:"ms-2 flex-grow-1 text-end fw-bold text-decoration-none"},ze=N(()=>n("img",{src:S,alt:"points",height:"28"},null,-1)),He={class:"mt-2 mb-2 text-center"},We={class:"d-flex w-100 justify-content-start align-items-center px-5"},Ue=["checked"],Ve={class:"d-flex mt-5 w-100 justify-content-left align-items-center px-5"},Ke=["checked"],Je=N(()=>n("img",{src:Ce,alt:"alps",height:"24"},null,-1)),qe={class:"d-flex mt-3 w-100 justify-content-left align-items-center px-5"},Ye=["checked"],Qe=N(()=>n("img",{src:Se,alt:"woodlandEdge",height:"24"},null,-1)),Xe={class:"d-flex mt-3 w-100 justify-content-start align-items-center px-5"},Ze=["checked"],et={class:"d-flex mt-3 w-100 justify-content-start align-items-center px-5"},tt=["checked"],st={class:"d-flex mt-3 w-100 justify-content-start align-items-center px-5"},nt=["checked"],ot={class:"d-flex justify-content-center w-100 mt-5"};function rt(e,s,o,f,h,t){const u=p("font-awesome-icon"),i=p("FloatingButtons");return l(),d(x,null,[n("div",Ne,[n("div",{class:"pe-2 mx-auto d-flex align-items-center","data-bs-toggle":"offcanvas","data-bs-target":"#navigation",onClick:s[0]||(s[0]=(...r)=>e.openMenu&&e.openMenu(...r))},[c(u,{icon:"bars",class:"text-light p-1 border border-light rounded-1"})]),t.currentPlayer?(l(),d("div",Ae,[h.editing?(l(),d("div",Be,[n("input",{id:"playerNameInput",type:"text",value:t.currentPlayer.name,class:"form-control",onfocus:"this.select();",onclick:"this.select();",onKeydown:s[3]||(s[3]=j((...r)=>t.updatePlayerName&&t.updatePlayerName(...r),["enter"]))},null,40,Oe),n("button",{class:"btn btn-outline-light btn-sm ms-1",onClick:s[4]||(s[4]=(...r)=>t.updatePlayerName&&t.updatePlayerName(...r))},"OK")])):(l(),d("div",Ie,[n("span",{class:"current-player-text fs-1",onClick:s[1]||(s[1]=r=>h.editing=!0)},m(t.currentPlayer.name),1),n("span",Fe,[c(u,{icon:"edit",size:"xs",onClick:s[2]||(s[2]=r=>h.editing=!0)})])])),n("div",Me,[De,w(" "+m(t.points),1)])])):y("",!0)]),n("div",$e,[n("div",Ge,[n("button",{type:"button",class:"btn-close text-reset",onClick:s[5]||(s[5]=(...r)=>t.closeMenu&&t.closeMenu(...r)),"aria-label":"Close"})]),n("div",je,[n("div",Re,[(l(!0),d(x,null,P(t.forests,(r,E)=>(l(),d("div",{class:v(["list-group-item d-flex align-items-center",{active:r.playerName===t.currentPlayer.name}]),onClick:F=>t.selectPlayer(r.playerName)},[n("span",null,m(r.playerName),1),n("span",Le,[ze,w(" "+m(r.points),1)])],10,Te))),256))]),n("div",He,[t.players.length<5?(l(),d("button",{key:0,class:"btn btn-sm btn-primary",onClick:s[6]||(s[6]=(...r)=>t.addPlayer&&t.addPlayer(...r))},[c(u,{icon:"user-plus"})])):y("",!0)]),n("div",We,[n("input",{class:"form-check form-check-input bg-primary",type:"checkbox",checked:t.distributedScoring,onInput:s[7]||(s[7]=(...r)=>t.toggleDistributedScoring&&t.toggleDistributedScoring(...r))},null,40,Ue),n("div",{class:"form-check-label ms-2 user-select-none text-wrap",onClick:s[8]||(s[8]=(...r)=>t.toggleDistributedScoring&&t.toggleDistributedScoring(...r))},m(e.$t("distributedScoring")),1)]),n("div",Ve,[n("input",{class:"form-check form-check-input bg-primary",type:"checkbox",checked:t.alpineExpansion,onInput:s[9]||(s[9]=(...r)=>t.toggleAlpineExpansion&&t.toggleAlpineExpansion(...r))},null,40,Ke),n("div",{class:"form-check-label ms-2 user-select-none",onClick:s[10]||(s[10]=(...r)=>t.toggleAlpineExpansion&&t.toggleAlpineExpansion(...r))},[Je,w(" "+m(e.$t("alpineExpansion")),1)])]),n("div",qe,[n("input",{class:"form-check form-check-input bg-primary",type:"checkbox",checked:t.woodlandEdgeExpansion,onInput:s[11]||(s[11]=(...r)=>t.toggleWoodlandEdgeExpansion&&t.toggleWoodlandEdgeExpansion(...r))},null,40,Ye),n("div",{class:"form-check-label ms-2 user-select-none",onClick:s[12]||(s[12]=(...r)=>t.toggleWoodlandEdgeExpansion&&t.toggleWoodlandEdgeExpansion(...r))},[Qe,w(" "+m(e.$t("woodlandEdgeExpansion")),1)])]),n("div",Xe,[n("input",{class:"form-check form-check-input bg-primary",type:"checkbox",checked:t.hobbyPromo,onInput:s[13]||(s[13]=(...r)=>t.toggleHobbyPromo&&t.toggleHobbyPromo(...r))},null,40,Ze),n("div",{class:"form-check-label ms-2 user-select-none text-wrap",onClick:s[14]||(s[14]=(...r)=>t.toggleHobbyPromo&&t.toggleHobbyPromo(...r))},m(e.$t("hobbyPromo")),1)]),n("div",et,[n("input",{class:"form-check form-check-input bg-primary",type:"checkbox",checked:t.spiel24Promo,onInput:s[15]||(s[15]=(...r)=>t.toggleSpiel24Promo&&t.toggleSpiel24Promo(...r))},null,40,tt),n("div",{class:"form-check-label ms-2 user-select-none text-wrap",onClick:s[16]||(s[16]=(...r)=>t.toggleSpiel24Promo&&t.toggleSpiel24Promo(...r))},m(e.$t("spiel24Promo")),1)]),n("div",st,[n("input",{class:"form-check form-check-input bg-primary",type:"checkbox",checked:t.duererExpansion,onInput:s[17]||(s[17]=(...r)=>t.toggleDuererExpansion&&t.toggleDuererExpansion(...r))},null,40,nt),n("div",{class:"form-check-label ms-2 user-select-none text-wrap",onClick:s[18]||(s[18]=(...r)=>t.toggleDuererExpansion&&t.toggleDuererExpansion(...r))},m(e.$t("duererExpansion")),1)]),n("div",ot,[n("span",{class:"flag-icon flag-icon-gb-eng cursor-pointer",onClick:s[19]||(s[19]=r=>t.changeLanguage("en"))}),n("span",{class:"ms-2 flag-icon flag-icon-de cursor-pointer",onClick:s[20]||(s[20]=r=>t.changeLanguage("de"))}),n("span",{class:"ms-2 flag-icon flag-icon-fr cursor-pointer",onClick:s[21]||(s[21]=r=>t.changeLanguage("fr"))}),n("span",{class:"ms-2 flag-icon flag-icon-it cursor-pointer",onClick:s[22]||(s[22]=r=>t.changeLanguage("it"))}),n("span",{class:"ms-2 flag-icon flag-icon-pl cursor-pointer",onClick:s[23]||(s[23]=r=>t.changeLanguage("pl"))}),n("span",{class:"ms-2 flag-icon flag-icon-ru cursor-pointer",onClick:s[24]||(s[24]=r=>t.changeLanguage("ru"))}),n("span",{class:"ms-2 flag-icon flag-icon-cn cursor-pointer",onClick:s[25]||(s[25]=r=>t.changeLanguage("cn"))}),n("span",{class:"ms-2 flag-icon flag-icon-nl cursor-pointer",onClick:s[26]||(s[26]=r=>t.changeLanguage("nl"))}),n("span",{class:"ms-2 flag-icon flag-icon-bg cursor-pointer",onClick:s[27]||(s[27]=r=>t.changeLanguage("bg"))})]),n("div",{class:"mt-5 d-block btn btn-danger cursor-pointer",onClick:s[28]||(s[28]=(...r)=>t.startNewGame&&t.startNewGame(...r))},m(e.$t("startNewGame")),1),n("div",{class:"mt-2 d-block btn btn-danger",onClick:s[29]||(s[29]=(...r)=>t.resetPlayers&&t.resetPlayers(...r))},m(e.$t("resetPlayers")),1)])]),c(i,{onAddPlayer:t.addPlayer,onToggleStandings:s[30]||(s[30]=r=>e.$emit("toggleStandings"))},null,8,["onAddPlayer"])],64)}const at=k(Ee,[["render",rt],["__scopeId","data-v-5620d261"]]),it=e=>{const s=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),f=String(e.getDate()).padStart(2,"0"),h=String(e.getHours()).padStart(2,"0"),t=String(e.getMinutes()).padStart(2,"0"),u=String(e.getSeconds()).padStart(2,"0");return`${s}-${o}-${f} ${h}:${t}:${u}`},lt={name:"Ranking",components:{FontAwesomeIcon:C},emits:["toggleStandings","startNewGame","resetPlayers"],data(){return{time:new Date,interval:null}},computed:{forests(){const e=[...g().forests].sort((f,h)=>h.points-f.points);let s=1,o=9999;return e.map(f=>(f.points<o&&(s=e.findIndex(h=>h.playerName===f.playerName)+1),o=f.points,{...f,rank:s}))},playingTimeInMinutes(){return Math.trunc((this.time.getTime()-a().startTime.getTime())/1e3/60)},bgStatsData(){const e=[];for(let o of g().forests)e.push({startPlayer:g().forests.indexOf(o)===0,name:o.playerName,rank:o.rank,score:o.points,winner:o.rank===1,sourcePlayerId:o.playerName});const s={board:"",durationMin:this.playingTimeInMinutes,comments:"",game:{bggId:391163,highestWins:!0,name:this.$t("forestShuffle"),noPoints:!1,sourceGameId:"Forest Shuffle"},players:e,playDate:it(new Date),sourceName:this.$t("meta.title"),sourcePlayId:new Date().getTime()};return encodeURIComponent(JSON.stringify(s))}},methods:{selectPlayer(e){a().selectPlayer(e),this.$emit("toggleStandings")}},mounted(){this.interval=setInterval(()=>{this.time=new Date},1e4)},beforeDestroy(){clearInterval(this.interval)}},$=e=>(A("data-v-508f24bc"),e=e(),I(),e),dt={class:"container"},ct={class:"list-group mt-2"},mt={class:"list-group-item"},ut={class:"d-flex justify-content-between"},gt={class:"pe-2 rank"},ft=["onClick"],ht={class:"d-flex align-items-center justify-content-center ps-2 text-end"},yt=$(()=>n("img",{src:S,height:"20"},null,-1)),bt={class:"text-center mt-2"},pt=["href"],_t=$(()=>n("img",{src:"https://i0.wp.com/www.bgstatsapp.com/wp-content/uploads/2020/11/Post-to-BG-Stats.png?resize=133%2C34&ssl=1",alt:"",width:"133",height:"34",srcset:"https://i0.wp.com/www.bgstatsapp.com/wp-content/uploads/2020/11/Post-to-BG-Stats.png?w=548&ssl=1 548w, https://i0.wp.com/www.bgstatsapp.com/wp-content/uploads/2020/11/Post-to-BG-Stats.png?resize=300%2C77&ssl=1 300w",sizes:"(max-width: 133px) 100vw, 133px"},null,-1)),vt=[_t];function wt(e,s,o,f,h,t){return l(),d("div",dt,[n("div",ct,[(l(!0),d(x,null,P(t.forests,(u,i)=>(l(),d("div",mt,[n("div",ut,[n("div",gt,m(u.rank>i?`${u.rank}.`:""),1),n("div",{onClick:r=>t.selectPlayer(u.playerName),class:"flex-grow-1 fw-bold"},m(u.playerName),9,ft),n("div",ht,[yt,w("  "+m(u.points),1)])])]))),256))]),n("div",bt,[n("a",{href:"https://app.bgstatsapp.com/createPlay.html?data="+t.bgStatsData,target:"_bgStats"},vt,8,pt)])])}const xt=k(lt,[["render",wt],["__scopeId","data-v-508f24bc"]]),kt={name:"ForestSummaryPointsEntry",props:{count:Number,points:Number,isFas:Boolean,bgColor:String,icon:String,border:Boolean},computed:{iconUrl(){return"https://forestshuffle.app/img/symbols/tree.png"},shrubIconUrl(){return"https://forestshuffle.app/img/symbols/shrub.png"},bgColorClass(){return"bg-"+this.bgColor},woodlandExpansion(){return a().woodlandEdgeExpansion}}},Pt={class:"d-flex align-items-center"},Ct={key:0},St=["src","alt"],Et=["src","alt"],Nt={class:"d-flex justify-content-center mt-2"},At=n("img",{src:S,height:"22"},null,-1);function It(e,s,o,f,h,t){const u=p("font-awesome-icon");return l(),d("div",{class:v(["d-block",{"pe-3 border-end border-light":o.border}])},[n("div",Pt,[o.isFas?(l(),d("div",{key:1,class:v(["ms-2",t.bgColorClass+" border border-2 text-ligh t border-light rounded justify-content-center align-items-center d-flex me-2"]),style:{"min-width":"24px","min-height":"24px"}},[c(u,{icon:o.icon},null,8,["icon"])],2)):(l(),d("div",Ct,[n("img",{src:t.iconUrl,alt:e.$t(o.icon),height:"24"},null,8,St),o.icon==="tree"&&t.woodlandExpansion?(l(),d("img",{key:0,src:t.shrubIconUrl,alt:e.$t(o.icon),height:"24"},null,8,Et)):y("",!0)])),w(" "+m(o.count),1)]),n("div",Nt,[At,w(" "+m(o.points),1)])],2)}const Ft=k(kt,[["render",It]]),Bt={name:"ForestSummary",components:{ForestSummaryPointsEntry:Ft,FontAwesomeIcon:C},props:{forest:O},computed:{}},Ot={class:"card"},Mt={class:"card-header fs-5"},Dt={class:"card-body"},$t={class:"d-flex justify-content-around align-items-center"};function Gt(e,s,o,f,h,t){const u=p("ForestSummaryPointsEntry");return l(),d("div",Ot,[n("div",Mt,m(e.$t("summary")),1),n("div",Dt,[n("div",$t,[c(u,{icon:"tree","is-fas":!1,points:o.forest.treePoints(),count:o.forest.treeCardsCount(),border:!0},null,8,["points","count"]),c(u,{"bg-color":"secondary",icon:"arrow-up","is-fas":!0,points:o.forest.topPoints(),count:o.forest.topCount(),border:!0},null,8,["points","count"]),c(u,{"bg-color":"warning",icon:"arrow-down","is-fas":!0,points:o.forest.bottomPoints(),count:o.forest.bottomCount(),border:!0},null,8,["points","count"]),c(u,{"bg-color":"info",icon:"arrows-left-right","is-fas":!0,points:o.forest.sidePoints(),count:o.forest.sideCount(),border:!1},null,8,["points","count"])])])])}const jt=k(Bt,[["render",Gt]]),Rt={components:{ForestSummary:jt,Ranking:xt,FloatingButtons:D,NavigationAndButtons:at,CardAmountEditorList:_e,CardAmountEditor:M},computed:{playerName(){var e;return(e=a().currentPlayer)==null?void 0:e.name},forest(){return g().getForestByPlayerName(this.playerName)},cards(){return g().getForestByPlayerName(this.playerName).cards},trees(){return this.cards.filter(e=>e.symbols.indexOf("tree")>=0&&!(e.hide&&e.hide(a())))},shrubs(){return this.cards.filter(e=>e.symbols.indexOf("shrub")>=0&&!(e.hide&&e.hide(a())))},birds(){return this.cards.filter(e=>e.symbols.indexOf("bird")>=0&&!(e.hide&&e.hide(a())))},butterflies(){return this.cards.filter(e=>e.symbols.indexOf("butterfly")>=0&&!(e.hide&&e.hide(a())))},others(){return this.forest.cards.filter(e=>e.name==="redSquirrel"&&!(e.hide&&e.hide(a())))},plants(){return this.cards.filter(e=>e.symbols.indexOf("plant")>=0&&!(e.hide&&e.hide(a())))},mushrooms(){return this.cards.filter(e=>e.symbols.indexOf("mushroom")>=0&&!(e.hide&&e.hide(a())))},amphibians(){return this.cards.filter(e=>e.symbols.indexOf("amphibian")>=0&&!(e.hide&&e.hide(a())))},insectsBottom(){return this.cards.filter(e=>e.symbols.indexOf("insect")>=0&&e.position==="bottom"&&!(e.hide&&e.hide(a())))},pawedBottom(){return this.cards.filter(e=>e.symbols.indexOf("pawedAnimal")>=0&&e.position==="bottom"&&!(e.hide&&e.hide(a())))},birdsSide(){return this.cards.filter(e=>e.symbols.indexOf("bird")>=0&&e.position==="side"&&!(e.hide&&e.hide(a())))},insectsSide(){return this.cards.filter(e=>e.symbols.indexOf("insect")>=0&&e.position==="side"&&!(e.hide&&e.hide(a())))},bats(){return this.cards.filter(e=>e.symbols.indexOf("bat")>=0&&!(e.hide&&e.hide(a())))},deerAndCloven(){return this.cards.filter(e=>(e.symbols.indexOf("deer")>=0||e.symbols.indexOf("clovenHoofedAnimal")>=0)&&!(e.hide&&e.hide(a())))},pawedSide(){return this.cards.filter(e=>e.symbols.indexOf("pawedAnimal")>=0&&e.position==="side"&&!(e.hide&&e.hide(a())))},points(){return g().getForestByPlayerName(this.playerName).points}},methods:{setCaveCount(e){g().setCaveCount(this.playerName,e)},toggleRankingsModal(e){const s=document.getElementById("standingsModal");s&&(s.classList.contains("show")?B.getOrCreateInstance(s).hide():e||B.getOrCreateInstance(s).show())},startNewGame(){a().players.length>1&&g().forests.reduce((e,s)=>e+=s.points,0)>=50&&b("gameFinished",{playerCount:a().players.length,maxPoints:g().forests.reduce((e,s)=>e=s.points>e?s.points:e,0)}),g().reset(),a().selectPlayer(a().players[0].name),this.toggleRankingsModal(!0),b("newGameStarted")},resetPlayers(){a().resetPlayers(),a().addPlayer(`${this.$t("player")} 1`),g().reinit(),this.startNewGame(),b("playerReset")}},watch:{playerName:{handler(e){if(!e){const s=a();if(s.players.length===0){const o=this.$t("player")+" 1";s.addPlayer(o),s.selectPlayer(o),g().addForest(o)}else s.selectPlayer(s.players[0].name)}},immediate:!0}},mounted(){b("newGameStarted")}},Tt=e=>(A("data-v-1f401714"),e=e(),I(),e),Lt={key:0,class:"container mb-5"},zt=Tt(()=>n("div",{class:"distance-keeper position-relative"},null,-1)),Ht={class:"d-flex align-items-center mt-4 border-primary border-bottom"},Wt={class:"border border-2 bg-secondary text-light border-light rounded justify-content-center align-items-center d-flex me-1 position-icon"},Ut={class:"ms-2 fs-2"},Vt={class:"d-flex align-items-center mt-4 border-primary border-bottom"},Kt={class:"border border-2 bg-warning text-light border-light rounded justify-content-center align-items-center d-flex me-1 position-icon"},Jt={class:"ms-2 fs-2"},qt={class:"d-flex align-items-center mt-4 border-primary border-bottom"},Yt={class:"border border-2 bg-info text-light border-light rounded justify-content-center align-items-center d-flex me-1 position-icon"},Qt={class:"ms-2 fs-2"},Xt={class:"mt-4"},Zt={class:"text-center"},es=["alt"],ts={class:"text-center"},ss=["value"],ns={class:"px-4 mt-3"},os={id:"standingsModal",class:"modal fade",tabindex:"-1"},rs={class:"modal-dialog"},as={class:"modal-content"},is={class:"modal-header"},ls={class:"fs-1"},ds={class:"modal-body"},cs={class:"modal-footer d-flex justify-content-between"},ms={class:"flex-grow-1 text-end"};function us(e,s,o,f,h,t){const u=p("NavigationAndButtons"),i=p("CardAmountEditorList"),r=p("font-awesome-icon"),E=p("ForestSummary"),F=p("Ranking");return l(),d(x,null,[c(u,{onToggleStandings:t.toggleRankingsModal,onStartNewGame:t.startNewGame,onResetPlayers:t.resetPlayers},null,8,["onToggleStandings","onStartNewGame","onResetPlayers"]),t.forest?(l(),d("div",Lt,[zt,c(i,{cards:t.trees,forest:t.forest,symbol:"tree",heading:"trees"},null,8,["cards","forest"]),c(i,{cards:t.shrubs,forest:t.forest,symbol:"shrub",heading:"shrubs",class:"mt-4"},null,8,["cards","forest"]),n("div",Ht,[n("div",Wt,[c(r,{icon:"arrow-up"})]),n("span",Ut,m(e.$t("tops")),1)]),c(i,{class:"mt-1",cards:t.birds,forest:t.forest,symbol:"bird",heading:"birds"},null,8,["cards","forest"]),c(i,{class:"mt-4",cards:t.butterflies,forest:t.forest,symbol:"butterfly",heading:"butterflies"},null,8,["cards","forest"]),c(i,{class:"mt-4",cards:t.others,forest:t.forest,symbol:"pawedAnimal",heading:"pawedAnimals"},null,8,["cards","forest"]),n("div",Vt,[n("div",Kt,[c(r,{icon:"arrow-down"})]),n("span",Jt,m(e.$t("bottoms")),1)]),c(i,{class:"mt-1",cards:t.plants,forest:t.forest,symbol:"plant",heading:"plants"},null,8,["cards","forest"]),c(i,{class:"mt-4",cards:t.mushrooms,forest:t.forest,symbol:"mushroom",heading:"mushrooms"},null,8,["cards","forest"]),c(i,{class:"mt-4",cards:t.amphibians,forest:t.forest,symbol:"amphibian",heading:"amphibians"},null,8,["cards","forest"]),c(i,{class:"mt-4",cards:t.insectsBottom,forest:t.forest,symbol:"insect",heading:"insects"},null,8,["cards","forest"]),c(i,{class:"mt-4",cards:t.pawedBottom,forest:t.forest,symbol:"pawedAnimal",heading:"pawedAnimals"},null,8,["cards","forest"]),n("div",qt,[n("div",Yt,[c(r,{icon:"arrows-left-right"})]),n("span",Qt,m(e.$t("sides")),1)]),t.birdsSide.length>0?(l(),R(i,{key:0,class:"mt-2",cards:t.birdsSide,forest:t.forest,symbol:"bird",heading:"birds"},null,8,["cards","forest"])):y("",!0),c(i,{class:"mt-2",cards:t.insectsSide,forest:t.forest,symbol:"insect",heading:"insects"},null,8,["cards","forest"]),c(i,{class:"mt-4",cards:t.bats,forest:t.forest,symbol:"bat",heading:"bats"},null,8,["cards","forest"]),c(i,{class:"mt-4",cards:t.deerAndCloven,forest:t.forest,symbol:"deer",symbol2:"clovenHoofedAnimal",heading:"deerAndCloven"},null,8,["cards","forest"]),c(i,{class:"mt-4",cards:t.pawedSide,forest:t.forest,symbol:"pawedAnimal",heading:"pawedAnimals"},null,8,["cards","forest"]),n("div",Xt,[n("div",Zt,[n("img",{src:"./img/cave.png",alt:e.$t("cave"),onClick:s[0]||(s[0]=_=>t.setCaveCount(t.forest.caveCount+1))},null,8,es)]),n("div",ts,[n("input",{value:t.forest.caveCount,onInput:s[1]||(s[1]=_=>t.setCaveCount(Number(_.target.value))),type:"number",class:"form-control text-center fs-5",min:"0",onfocus:"this.select();",onclick:"this.select();"},null,40,ss)])]),n("div",ns,[c(E,{forest:t.forest},null,8,["forest"])])])):y("",!0),n("div",os,[n("div",rs,[n("div",as,[n("div",is,[n("div",ls,m(e.$t("ranking")),1),n("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:s[2]||(s[2]=_=>t.toggleRankingsModal(!0))})]),n("div",ds,[c(F,{onToggleStandings:t.toggleRankingsModal},null,8,["onToggleStandings"])]),n("div",cs,[n("div",null,[n("button",{class:"d-block btn btn-danger btn-sm",onClick:s[3]||(s[3]=(..._)=>t.startNewGame&&t.startNewGame(..._))},m(e.$t("startNewGame")),1),n("button",{class:"mt-1 btn btn-danger btn-sm",onClick:s[4]||(s[4]=(..._)=>t.resetPlayers&&t.resetPlayers(..._))},m(e.$t("resetPlayers")),1)]),n("div",ms,[n("button",{class:"btn btn-primary",onClick:s[5]||(s[5]=_=>t.toggleRankingsModal(!0))},"OK")])])])])])],64)}const As=k(Rt,[["render",us],["__scopeId","data-v-1f401714"]]);export{As as default};
