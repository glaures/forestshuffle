import{F as P}from"./@fortawesome-CL_flilV.js";import{_ as w,u,a,F,c as D}from"./index-IWliIezx.js";import{e as y}from"./vue-gtag-D7jDQiaH.js";import{Z as _,J as d,_ as i,R as n,Q as h,U as c,K as x,F as k,Y as C,G as m,a3 as $,a4 as I,S as v,N as j,a5 as G,M as L,a1 as R,a6 as z}from"./@vue-JyELclcM.js";import{O as H,M}from"./bootstrap-Q_Pa-GeZ.js";import"./vue-router-BsEly6g0.js";import"./vue-toastification-BJomHX6m.js";import"./pinia-DZdWx6Lx.js";import"./vue-i18n-ChjVTyu-.js";import"./@intlify-BKfkn4Ds.js";import"./@vueuse-GCP9bLvu.js";import"./@unhead-CIVXFljt.js";import"./unhead-CBj6-SSQ.js";import"./hookable-B8xFkYCm.js";import"./register-service-worker-TYP_X6yW.js";import"./@popperjs-BEKk9TLb.js";const U={name:"CardAmountEditor",components:{FontAwesomeIcon:P},props:{card:Object,forest:Object},computed:{playerName(){return this.forest.playerName},distributedScoring(){return a().distributedScoring}},methods:{addCard(){u().addCard(this.playerName,this.card.name);const e=this.$t(this.card.name,"en");y("cardAdded",{card:e})},removeCard(){u().removeCard(this.playerName,this.card.name)},paramAdd(e){e.type==="number"?u().addParam(this.playerName,this.card.name,e.name):e.type==="type"?u().addSymbolCount(this.playerName,e.symbol):e.type==="boolean"&&u().toggleParam(this.playerName,this.card.name,e.name)},paramSub(e){e.type==="number"?u().subParam(this.playerName,this.card.name,e.name):e.type==="type"&&u().subSymbolCount(this.playerName,e.symbol)}}},W=e=>($("data-v-624cb641"),e=e(),I(),e),V={class:"row mt-2"},K={class:"fw-bold col-1"},J={key:0},Y={class:"col pe-0 text-nowrap overflow-x-hidden"},q=["src"],Q=["src"],Z={class:"ms-2"},X={class:"col-1 ps-0 pe-0"},ee={class:"col-1 ps-1 text-start text-nowrap"},te={key:0},se={class:"fw-bold offset-1 col-1 d-flex align-items-center"},ne={key:0},oe={key:1},re={key:2},ae={key:0,class:"text-success"},le={key:1,class:"text-danger"},ie={class:"col text-nowrap pe-0"},de=["onClick"],ce=["src","alt"],me={class:"ps-2"},ge={class:"col-1 ps-0 pe-0"},ue=["onClick"],he=W(()=>n("div",{class:"col-1 ps-1"},null,-1));function fe(e,t,r,f,p,s){const g=_("font-awesome-icon");return i(),d(k,null,[n("div",V,[n("div",K,[r.card.count>0?(i(),d("span",J,c(r.card.count)+"×",1)):h("",!0)]),n("div",Y,[n("button",{onClick:t[0]||(t[0]=(...l)=>s.addCard&&s.addCard(...l)),class:x(["btn-"+r.card.symbols[0],"w-100 btn btn-primary btn-sm text-start"])},[(i(!0),d(k,null,C(r.card.symbols,(l,o)=>(i(),d("img",{src:"./img/symbols/"+l+".png",height:"20",class:x({"ms-1":o>0})},null,10,q))),256)),r.card.name.startsWith("roe")?(i(),d("img",{key:0,src:"./img/symbols/"+r.card.type+".png",height:"20",class:"ms-1"},null,8,Q)):h("",!0),n("span",Z,c(e.$t(r.card.name)),1)],2)]),n("div",X,[n("button",{class:"ms-1 btn btn-outline-danger btn-sm",onClick:t[1]||(t[1]=(...l)=>s.removeCard&&s.removeCard(...l))},"×")]),n("div",ee,[r.card.count>0&&r.card.symbols.indexOf("butterfly")<0?(i(),d("span",te,c(r.card.points),1)):h("",!0)])]),(i(!0),d(k,null,C(r.card.params,(l,o)=>(i(),d("div",{key:l.name},[!l.distributed||s.distributedScoring?(i(),d("div",{key:0,class:x(["mt-1 row",{"mb-3":r.card.params.length===o+1}])},[n("div",se,[r.card.count>0&&l.type==="number"?(i(),d("span",ne,c(l.value),1)):h("",!0),r.card.count>0&&l.type==="type"?(i(),d("span",oe,c(r.forest[l.symbol+"Count"]),1)):h("",!0),r.card.count>0&&l.type==="boolean"?(i(),d("span",re,[l.value?(i(),d("span",ae,[m(g,{icon:"check",size:"lg"})])):(i(),d("span",le,[m(g,{icon:"xmark",size:"lg"})]))])):h("",!0)]),n("div",ie,[n("button",{onClick:N=>s.paramAdd(l),class:x(["btn-"+r.card.symbols[0],"btn btn-sm btn-primary text-start w-100"])},[l.type==="type"?(i(),d("img",{key:0,src:"./img/symbols/"+l.symbol+".png",alt:e.$t(l.symbol),height:"20"},null,8,ce)):h("",!0),n("span",me,c(e.$t(l.name)),1)],10,de)]),n("div",ge,[l.type!=="boolean"?(i(),d("button",{key:0,class:"ms-1 btn btn-outline-danger btn-sm",onClick:N=>s.paramSub(l)}," × ",8,ue)):h("",!0)]),he],2)):h("",!0)]))),128))],64)}const T=w(U,[["render",fe],["__scopeId","data-v-624cb641"]]),E="/img/points.png",pe={name:"CardAmountEditorList",components:{CardAmountEditor:T},props:{cards:Array,forest:F,symbol:String,symbol2:String,heading:String},computed:{totalPoints(){return this.symbol==="butterfly"?this.forest.butterflyPoints:this.cards.map(e=>e.points).reduce((e,t)=>t+=e,0)},filteredCards(){let e=this.cards;return a().alpineExpansion||(e=e.filter(t=>t.symbols.indexOf("alps")<0)),a().woodlandEdgeExpansion||(e=e.filter(t=>t.symbols.indexOf("woodlandEdge")<0)),e}}},ye={key:0},be=["src","alt"],_e=["src","alt"],ve={class:"ms-1 fs-5 flex-grow-1"},ke={class:"fs-5 fw-bold"},xe=n("img",{src:E,alt:"points",height:"28"},null,-1);function we(e,t,r,f,p,s){const g=_("CardAmountEditor");return s.filteredCards.length>0?(i(),d("div",ye,[n("div",j(e.$attrs,{class:"d-flex align-items-center"}),[n("img",{src:"./img/symbols/"+r.symbol+".png",height:"24",alt:e.$t(r.heading)},null,8,be),r.symbol2?(i(),d("img",{key:0,src:"./img/symbols/"+r.symbol2+".png",height:"24",alt:e.$t(r.heading)},null,8,_e)):h("",!0),n("div",ve,c(e.$t(r.heading)),1),n("div",ke,[xe,v(" "+c(s.totalPoints),1)])],16),(i(!0),d(k,null,C(s.filteredCards,l=>(i(),d("div",{key:"cae_"+l.name,class:"d-block"},[m(g,{card:l,forest:r.forest},null,8,["card","forest"])]))),128))])):h("",!0)}const Ce=w(pe,[["render",we]]),Pe={name:"FloatingButtons",components:{FontAwesomeIcon:P},emits:["addPlayer","toggleStandings"],computed:{playerCount(){return a().players.length}}},Ee={class:"wrapper"},Se={class:"d-flex justify-content-around align-items-center"},Ne={class:"button-group"};function $e(e,t,r,f,p,s){const g=_("font-awesome-icon");return i(),d("div",Ee,[n("div",Se,[n("div",Ne,[m(g,{class:x(["btn btn-primary rounded-5 py-2 shadow",{disabled:s.playerCount>=5}]),icon:"user-plus",size:"1x",onClick:t[0]||(t[0]=l=>e.$emit("addPlayer"))},null,8,["class"]),m(g,{class:"ms-1 btn btn-primary rounded-5 py-2 shadow",icon:"list-ol",size:"1x",onClick:t[1]||(t[1]=l=>e.$emit("toggleStandings"))})])])])}const B=w(Pe,[["render",$e],["__scopeId","data-v-60ea775f"]]),Ie="/img/symbols/alps.png",Ae="/img/symbols/woodlandEdge.png",Me="/img/symbols/exploration.png",Fe={name:"NavigationAndButtons",components:{FloatingButtons:B,FontAwesomeIcon:P},emits:["toggleStandings","startNewGame","resetPlayers"],data(){return{editing:!1}},computed:{distributedScoring(){return a().distributedScoring},alpineExpansion(){return a().alpineExpansion},woodlandEdgeExpansion(){return a().woodlandEdgeExpansion},explorationExpansion(){return a().explorationExpansion},duererExpansion(){return a().duererExpansion},hobbyPromo(){return a().hobbyPromo},spiel24Promo(){return a().spiel24Promo},maretakPromo(){return a().maretakPromo},elkPromo(){return a().elkPromo},forests(){return u().forests},players(){return a().players.map(e=>({...e,points:u().getForestByPlayerName(e.name).points}))},currentPlayer(){return a().currentPlayer},playerNumber(){return a().players.findIndex(e=>e.name===this.currentPlayer.name)+1},points(){return u().getForestByPlayerName(this.currentPlayer.name).points}},methods:{toggleDistributedScoring(){return u().toggleDistributedScoring()},closeMenu(){const e=H.getInstance(document.getElementById("navigation"));e&&e.hide()},addPlayer(){const e=this.$t("player")+" "+(this.players.length+1);u().addForest(e),a().addPlayer(e),this.selectPlayer(e),y("playerAdded",{totalPlayers:a().players.length})},selectPlayer(e){a().selectPlayer(e),this.closeMenu()},updatePlayerName(){this.editing=!1;const e=this.currentPlayer.name,t=document.getElementById("playerNameInput").value;a().updatePlayerName(e,t),u().getForestByPlayerName(e).playerName=t,y("playerNameUpdated",{name:t})},startNewGame(){this.$emit("startNewGame"),this.closeMenu()},resetPlayers(){this.$emit("resetPlayers"),this.closeMenu()},toggleAlpineExpansion(){a().toggleAlpineExpansion(),y("alpineExpansionToggled",{newState:this.alpineExpansion})},toggleWoodlandEdgeExpansion(){a().toggleWoodlandEdgeExpansion(),y("woodlandEdgeExpansion",{newState:this.woodlandEdgeExpansion})},toggleExplorationExpansion(){a().toggleExplorationEdgeExpansion(),y("explorationExpansion",{newState:this.explorationExpansion})},toggleDuererExpansion(){a().toggleDuererExpansion(),y("duererExpansionToggled",{newState:this.duererExpansion})},toggleHobbyPromo(){a().toggleHobbyPromo(),y("hobbyPromoToggled",{newState:this.hobbyPromo})},toggleSpiel24Promo(){a().toggleSpiel24Promo(),y("spiel24Toggled",{newState:this.spiel24Promo})},toggleMaretakPromo(){a().toggleMaretakPromo(),y("maretakToggled",{newState:this.maretakPromo})},toggleElkPromo(){a().toggleElkPromo(),y("elkToggled",{newState:this.elkPromo})},changeLanguage(e){this.$i18n.locale=e,localStorage.setItem("preferredLanguage",e),y("languageChanged",{language:e})}}},S=e=>($("data-v-77680732"),e=e(),I(),e),Te={class:"header d-flex align-items-center py-2 px-3"},Be={key:0,class:"d-flex justify-content-between align-items-center w-100 pe-1"},Oe={key:0},De={class:"ms-1 text-light cursor-pointer"},je={key:1,class:"d-flex"},Ge=["value"],Le={class:"current-player-text fs-1 d-flex align-items-center"},Re=S(()=>n("img",{src:E,alt:"points",height:"34"},null,-1)),ze={id:"navigation",class:"offcanvas offcanvas-start z-9999",tabindex:"-1"},He={class:"offcanvas-header"},Ue={class:"offcanvas-body"},We={class:"list-group"},Ve=["onClick"],Ke={class:"ms-2 flex-grow-1 text-end fw-bold text-decoration-none"},Je=S(()=>n("img",{src:E,alt:"points",height:"28"},null,-1)),Ye={class:"d-flex w-100 justify-content-start align-items-center px-3 small"},qe=["checked"],Qe={class:"d-flex justify-content-center w-100 mt-4"},Ze={class:"d-flex mt-3 w-100 justify-content-left align-items-center px-3 small"},Xe=["checked"],et=S(()=>n("img",{src:Ie,alt:"alps",height:"24"},null,-1)),tt={class:"d-flex mt-2 w-100 justify-content-left align-items-center px-3 small"},st=["checked"],nt=S(()=>n("img",{src:Ae,alt:"woodlandEdge",height:"24"},null,-1)),ot={class:"d-flex mt-2 w-100 justify-content-left align-items-center px-3 small"},rt=["checked"],at=S(()=>n("img",{src:Me,alt:"exploration",height:"24"},null,-1)),lt={class:"d-flex mt-2 w-100 justify-content-start align-items-center px-3 small"},it=["checked"],dt={class:"d-flex mt-2 w-100 justify-content-start align-items-center px-3 small"},ct=["checked"],mt={class:"d-flex mt-2 w-100 justify-content-start align-items-center px-3 small"},gt=["checked"],ut={class:"d-flex mt-2 w-100 justify-content-start align-items-center px-3 small"},ht=["checked"],ft={class:"d-flex mt-2 w-100 justify-content-start align-items-center px-3 small"},pt=["checked"];function yt(e,t,r,f,p,s){const g=_("font-awesome-icon"),l=_("FloatingButtons");return i(),d(k,null,[n("div",Te,[n("div",{class:"pe-2 mx-auto d-flex align-items-center","data-bs-toggle":"offcanvas","data-bs-target":"#navigation",onClick:t[0]||(t[0]=(...o)=>e.openMenu&&e.openMenu(...o))},[m(g,{icon:"bars",class:"text-light p-1 border border-light rounded-1"})]),s.currentPlayer?(i(),d("div",Be,[p.editing?(i(),d("div",je,[n("input",{id:"playerNameInput",type:"text",value:s.currentPlayer.name,class:"form-control",onfocus:"this.select();",onclick:"this.select();",onKeydown:t[3]||(t[3]=G((...o)=>s.updatePlayerName&&s.updatePlayerName(...o),["enter"]))},null,40,Ge),n("button",{class:"btn btn-outline-light btn-sm ms-1",onClick:t[4]||(t[4]=(...o)=>s.updatePlayerName&&s.updatePlayerName(...o))},"OK")])):(i(),d("div",Oe,[n("span",{class:"current-player-text fs-1",onClick:t[1]||(t[1]=o=>p.editing=!0)},c(s.currentPlayer.name),1),n("span",De,[m(g,{icon:"edit",size:"xs",onClick:t[2]||(t[2]=o=>p.editing=!0)})])])),n("div",Le,[Re,v(" "+c(s.points),1)])])):h("",!0)]),n("div",ze,[n("div",He,[n("button",{type:"button",class:"btn-close text-reset",onClick:t[5]||(t[5]=(...o)=>s.closeMenu&&s.closeMenu(...o)),"aria-label":"Close"})]),n("div",Ue,[n("div",We,[(i(!0),d(k,null,C(s.forests,(o,N)=>(i(),d("div",{class:x(["list-group-item d-flex align-items-center",{active:o.playerName===s.currentPlayer.name}]),onClick:A=>s.selectPlayer(o.playerName)},[n("span",null,c(o.playerName),1),n("span",Ke,[Je,v(" "+c(o.points),1)])],10,Ve))),256))]),n("div",Ye,[s.players.length<5?(i(),d("button",{key:0,class:"btn btn-sm btn-primary",onClick:t[6]||(t[6]=(...o)=>s.addPlayer&&s.addPlayer(...o))},[m(g,{icon:"user-plus"})])):h("",!0),n("input",{class:"ms-5 form-check form-check-input bg-primary",type:"checkbox",checked:s.distributedScoring,onInput:t[7]||(t[7]=(...o)=>s.toggleDistributedScoring&&s.toggleDistributedScoring(...o))},null,40,qe),n("div",{class:"form-check-label ms-2 user-select-none text-wrap",onClick:t[8]||(t[8]=(...o)=>s.toggleDistributedScoring&&s.toggleDistributedScoring(...o))},c(e.$t("distributedScoring")),1)]),n("div",{class:"mt-3 d-block btn btn-sm btn-primary cursor-pointer",onClick:t[9]||(t[9]=(...o)=>s.startNewGame&&s.startNewGame(...o))},c(e.$t("startNewGame")),1),n("div",{class:"mt-2 d-block btn btn-sm btn-danger",onClick:t[10]||(t[10]=(...o)=>s.resetPlayers&&s.resetPlayers(...o))},c(e.$t("resetPlayers")),1),n("div",Qe,[n("span",{class:"flag-icon flag-icon-gb-eng cursor-pointer",onClick:t[11]||(t[11]=o=>s.changeLanguage("en"))}),n("span",{class:"ms-2 flag-icon flag-icon-de cursor-pointer",onClick:t[12]||(t[12]=o=>s.changeLanguage("de"))}),n("span",{class:"ms-2 flag-icon flag-icon-fr cursor-pointer",onClick:t[13]||(t[13]=o=>s.changeLanguage("fr"))}),n("span",{class:"ms-2 flag-icon flag-icon-es cursor-pointer",onClick:t[14]||(t[14]=o=>s.changeLanguage("es"))}),n("span",{class:"ms-2 flag-icon flag-icon-it cursor-pointer",onClick:t[15]||(t[15]=o=>s.changeLanguage("it"))}),n("span",{class:"ms-2 flag-icon flag-icon-pl cursor-pointer",onClick:t[16]||(t[16]=o=>s.changeLanguage("pl"))}),n("span",{class:"ms-2 flag-icon flag-icon-ru cursor-pointer",onClick:t[17]||(t[17]=o=>s.changeLanguage("ru"))}),n("span",{class:"ms-2 flag-icon flag-icon-cn cursor-pointer",onClick:t[18]||(t[18]=o=>s.changeLanguage("cn"))}),n("span",{class:"ms-2 flag-icon flag-icon-nl cursor-pointer",onClick:t[19]||(t[19]=o=>s.changeLanguage("nl"))}),n("span",{class:"ms-2 flag-icon flag-icon-bg cursor-pointer",onClick:t[20]||(t[20]=o=>s.changeLanguage("bg"))}),n("span",{class:"ms-2 flag-icon flag-icon-br cursor-pointer",onClick:t[21]||(t[21]=o=>s.changeLanguage("ptBR"))})]),n("div",Ze,[n("input",{class:"form-check form-check-input bg-secondary",type:"checkbox",checked:s.alpineExpansion,onInput:t[22]||(t[22]=(...o)=>s.toggleAlpineExpansion&&s.toggleAlpineExpansion(...o))},null,40,Xe),n("div",{class:"form-check-label ms-2 user-select-none",onClick:t[23]||(t[23]=(...o)=>s.toggleAlpineExpansion&&s.toggleAlpineExpansion(...o))},[et,v(" "+c(e.$t("alpineExpansion")),1)])]),n("div",tt,[n("input",{class:"form-check form-check-input bg-secondary",type:"checkbox",checked:s.woodlandEdgeExpansion,onInput:t[24]||(t[24]=(...o)=>s.toggleWoodlandEdgeExpansion&&s.toggleWoodlandEdgeExpansion(...o))},null,40,st),n("div",{class:"form-check-label ms-2 user-select-none",onClick:t[25]||(t[25]=(...o)=>s.toggleWoodlandEdgeExpansion&&s.toggleWoodlandEdgeExpansion(...o))},[nt,v(" "+c(e.$t("woodlandEdgeExpansion")),1)])]),n("div",ot,[n("input",{class:"form-check form-check-input bg-secondary",type:"checkbox",checked:s.explorationExpansion,onInput:t[26]||(t[26]=(...o)=>s.toggleExplorationExpansion&&s.toggleExplorationExpansion(...o))},null,40,rt),n("div",{class:"form-check-label ms-2 user-select-none",onClick:t[27]||(t[27]=(...o)=>s.toggleExplorationExpansion&&s.toggleExplorationExpansion(...o))},[at,v(" "+c(e.$t("explorationExpansion")),1)])]),n("div",lt,[n("input",{class:"form-check form-check-input bg-secondary",type:"checkbox",checked:s.hobbyPromo,onInput:t[28]||(t[28]=(...o)=>s.toggleHobbyPromo&&s.toggleHobbyPromo(...o))},null,40,it),n("div",{class:"form-check-label ms-2 user-select-none text-wrap",onClick:t[29]||(t[29]=(...o)=>s.toggleHobbyPromo&&s.toggleHobbyPromo(...o))},c(e.$t("hobbyPromo")),1)]),n("div",dt,[n("input",{class:"form-check form-check-input bg-secondary",type:"checkbox",checked:s.spiel24Promo,onInput:t[30]||(t[30]=(...o)=>s.toggleSpiel24Promo&&s.toggleSpiel24Promo(...o))},null,40,ct),n("div",{class:"form-check-label ms-2 user-select-none text-wrap",onClick:t[31]||(t[31]=(...o)=>s.toggleSpiel24Promo&&s.toggleSpiel24Promo(...o))},c(e.$t("spiel24Promo")),1)]),n("div",mt,[n("input",{class:"form-check form-check-input bg-secondary",type:"checkbox",checked:s.maretakPromo,onInput:t[32]||(t[32]=(...o)=>s.toggleMaretakPromo&&s.toggleMaretakPromo(...o))},null,40,gt),n("div",{class:"form-check-label ms-2 user-select-none text-wrap",onClick:t[33]||(t[33]=(...o)=>s.toggleMaretakPromo&&s.toggleMaretakPromo(...o))},c(e.$t("maretakPromo")),1)]),n("div",ut,[n("input",{class:"form-check form-check-input bg-secondary",type:"checkbox",checked:s.duererExpansion,onInput:t[34]||(t[34]=(...o)=>s.toggleDuererExpansion&&s.toggleDuererExpansion(...o))},null,40,ht),n("div",{class:"form-check-label ms-2 user-select-none text-wrap",onClick:t[35]||(t[35]=(...o)=>s.toggleDuererExpansion&&s.toggleDuererExpansion(...o))},c(e.$t("duererExpansion")),1)]),n("div",ft,[n("input",{class:"form-check form-check-input bg-secondary",type:"checkbox",checked:s.elkPromo,onInput:t[36]||(t[36]=(...o)=>s.toggleElkPromo&&s.toggleElkPromo(...o))},null,40,pt),n("div",{class:"form-check-label ms-2 user-select-none text-wrap",onClick:t[37]||(t[37]=(...o)=>s.toggleElkPromo&&s.toggleElkPromo(...o))},c(e.$t("elkPromo")),1)])])]),m(l,{onAddPlayer:s.addPlayer,onToggleStandings:t[38]||(t[38]=o=>e.$emit("toggleStandings"))},null,8,["onAddPlayer"])],64)}const bt=w(Fe,[["render",yt],["__scopeId","data-v-77680732"]]),_t=e=>{const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),f=String(e.getDate()).padStart(2,"0"),p=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0"),g=String(e.getSeconds()).padStart(2,"0");return`${t}-${r}-${f} ${p}:${s}:${g}`},vt={name:"Ranking",components:{FontAwesomeIcon:P},emits:["toggleStandings","startNewGame","resetPlayers"],data(){return{time:new Date,interval:null}},computed:{forests(){const e=[...u().forests].sort((f,p)=>p.points-f.points);let t=1,r=9999;return e.map(f=>(f.points<r&&(t=e.findIndex(p=>p.playerName===f.playerName)+1),r=f.points,{...f,rank:t}))},playingTimeInMinutes(){return Math.trunc((this.time.getTime()-a().startTime.getTime())/1e3/60)},bgStatsData(){const e=[];for(let r of u().forests)e.push({startPlayer:u().forests.indexOf(r)===0,name:r.playerName,rank:r.rank,score:r.points,winner:r.rank===1,sourcePlayerId:r.playerName});const t={board:"",durationMin:this.playingTimeInMinutes,comments:"",game:{bggId:391163,highestWins:!0,name:this.$t("forestShuffle"),noPoints:!1,sourceGameId:"Forest Shuffle"},players:e,playDate:_t(new Date),sourceName:this.$t("meta.title"),sourcePlayId:new Date().getTime()};return encodeURIComponent(JSON.stringify(t))}},methods:{selectPlayer(e){a().selectPlayer(e),this.$emit("toggleStandings")}},mounted(){this.interval=setInterval(()=>{this.time=new Date},1e4)},beforeDestroy(){clearInterval(this.interval)}},O=e=>($("data-v-508f24bc"),e=e(),I(),e),kt={class:"container"},xt={class:"list-group mt-2"},wt={class:"list-group-item"},Ct={class:"d-flex justify-content-between"},Pt={class:"pe-2 rank"},Et=["onClick"],St={class:"d-flex align-items-center justify-content-center ps-2 text-end"},Nt=O(()=>n("img",{src:E,height:"20"},null,-1)),$t={class:"text-center mt-2"},It=["href"],At=O(()=>n("img",{src:"https://i0.wp.com/www.bgstatsapp.com/wp-content/uploads/2020/11/Post-to-BG-Stats.png?resize=133%2C34&ssl=1",alt:"",width:"133",height:"34",srcset:"https://i0.wp.com/www.bgstatsapp.com/wp-content/uploads/2020/11/Post-to-BG-Stats.png?w=548&ssl=1 548w, https://i0.wp.com/www.bgstatsapp.com/wp-content/uploads/2020/11/Post-to-BG-Stats.png?resize=300%2C77&ssl=1 300w",sizes:"(max-width: 133px) 100vw, 133px"},null,-1)),Mt=[At];function Ft(e,t,r,f,p,s){return i(),d("div",kt,[n("div",xt,[(i(!0),d(k,null,C(s.forests,(g,l)=>(i(),d("div",wt,[n("div",Ct,[n("div",Pt,c(g.rank>l?`${g.rank}.`:""),1),n("div",{onClick:o=>s.selectPlayer(g.playerName),class:"flex-grow-1 fw-bold"},c(g.playerName),9,Et),n("div",St,[Nt,v("  "+c(g.points),1)])])]))),256))]),n("div",$t,[n("a",{href:"https://app.bgstatsapp.com/createPlay.html?data="+s.bgStatsData,target:"_bgStats"},Mt,8,It)])])}const Tt=w(vt,[["render",Ft],["__scopeId","data-v-508f24bc"]]),Bt={name:"ForestSummaryPointsEntry",props:{count:Number,points:Number,isFas:Boolean,bgColor:String,icon:String,border:Boolean},computed:{iconUrl(){return"./img/symbols/tree.png"},shrubIconUrl(){return"./img/symbols/shrub.png"},bgColorClass(){return"bg-"+this.bgColor},woodlandExpansion(){return a().woodlandEdgeExpansion}}},Ot={class:"d-flex align-items-center"},Dt={key:0},jt=["src","alt"],Gt=["src","alt"],Lt={class:"d-flex justify-content-center mt-2"},Rt=n("img",{src:E,height:"22"},null,-1);function zt(e,t,r,f,p,s){const g=_("font-awesome-icon");return i(),d("div",{class:x(["d-block",{"pe-3 border-end border-light":r.border}])},[n("div",Ot,[r.isFas?(i(),d("div",{key:1,class:x(["ms-2",s.bgColorClass+" border border-2 text-ligh t border-light rounded justify-content-center align-items-center d-flex me-2"]),style:{"min-width":"24px","min-height":"24px"}},[m(g,{icon:r.icon},null,8,["icon"])],2)):(i(),d("div",Dt,[n("img",{src:s.iconUrl,alt:e.$t(r.icon),height:"24"},null,8,jt),r.icon==="tree"&&s.woodlandExpansion?(i(),d("img",{key:0,src:s.shrubIconUrl,alt:e.$t(r.icon),height:"24"},null,8,Gt)):h("",!0)])),v(" "+c(r.count),1)]),n("div",Lt,[Rt,v(" "+c(r.points),1)])],2)}const Ht=w(Bt,[["render",zt]]),Ut={name:"ForestSummary",components:{ForestSummaryPointsEntry:Ht,FontAwesomeIcon:P},props:{forest:F},computed:{totalCards(){return this.forest.totalCards()}}},Wt={class:"card"},Vt={class:"card-header fs-5"},Kt={class:"card-body"},Jt={class:"d-flex justify-content-around align-items-center"},Yt={class:"card-footer text-center"};function qt(e,t,r,f,p,s){const g=_("ForestSummaryPointsEntry");return i(),d("div",Wt,[n("div",Vt,c(e.$t("summary")),1),n("div",Kt,[n("div",Jt,[m(g,{icon:"tree","is-fas":!1,points:r.forest.treePoints(),count:r.forest.treeCardsCount(),border:!0},null,8,["points","count"]),m(g,{"bg-color":"secondary",icon:"arrow-up","is-fas":!0,points:r.forest.topPoints(),count:r.forest.topCount(),border:!0},null,8,["points","count"]),m(g,{"bg-color":"warning",icon:"arrow-down","is-fas":!0,points:r.forest.bottomPoints(),count:r.forest.bottomCount(),border:!0},null,8,["points","count"]),m(g,{"bg-color":"info",icon:"arrows-left-right","is-fas":!0,points:r.forest.sidePoints(),count:r.forest.sideCount(),border:!1},null,8,["points","count"])])]),n("div",Yt,c(e.$t("totalCards"))+": "+c(s.totalCards-r.forest.caveCount)+" ‐  "+c(e.$t("cave"))+": "+c(r.forest.caveCount),1)])}const Qt=w(Ut,[["render",qt]]),Zt={components:{ForestSummary:Qt,Ranking:Tt,FloatingButtons:B,NavigationAndButtons:bt,CardAmountEditorList:Ce,CardAmountEditor:T},computed:{playerName(){var e;return(e=a().currentPlayer)==null?void 0:e.name},forest(){return u().getForestByPlayerName(this.playerName)},cards(){return this.forest.cards},caveTypes(){return["cave",...D.map(e=>e.name)]},cavePoints(){return this.forest.calculateCavePoints()},selectedCaveType:{get(){return this.forest.caveType},set(e){this.forest.setCaveType(e)}},trees(){return this.cards.filter(e=>e.symbols.indexOf("tree")>=0&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},shrubs(){return this.cards.filter(e=>e.symbols.indexOf("shrub")>=0&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},birdsTop(){return this.cards.filter(e=>e.symbols.indexOf("bird")>=0&&e.position==="top"&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},butterflies(){return this.cards.filter(e=>e.symbols.indexOf("butterfly")>=0&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},others(){return this.forest.cards.filter(e=>e.name==="redSquirrel"&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},plants(){return this.cards.filter(e=>e.symbols.indexOf("plant")>=0&&e.position==="bottom"&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},plantsTop(){return this.cards.filter(e=>e.symbols.indexOf("plant")>=0&&e.position==="top"&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},mushrooms(){return this.cards.filter(e=>e.symbols.indexOf("mushroom")>=0&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},amphibians(){return this.cards.filter(e=>e.symbols.indexOf("amphibian")>=0&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},insectsBottom(){return this.cards.filter(e=>e.symbols.indexOf("insect")>=0&&e.position==="bottom"&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},pawedBottom(){return this.cards.filter(e=>e.symbols.indexOf("pawedAnimal")>=0&&e.position==="bottom"&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},birdsSide(){return this.cards.filter(e=>e.symbols.indexOf("bird")>=0&&e.position==="side"&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},insectsSide(){return this.cards.filter(e=>e.symbols.indexOf("insect")>=0&&e.position==="side"&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},bats(){return this.cards.filter(e=>e.symbols.indexOf("bat")>=0&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},deerAndCloven(){return this.cards.filter(e=>(e.symbols.indexOf("deer")>=0||e.symbols.indexOf("clovenHoofedAnimal")>=0)&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},pawedSide(){return this.cards.filter(e=>e.symbols.indexOf("pawedAnimal")>=0&&e.position==="side"&&!(e.hide&&e.hide(a()))).sort((e,t)=>this.$t(e.name).localeCompare(this.$t(t.name)))},points(){return this.forest().points},explorationExpansion(){return a().explorationExpansion}},methods:{setCaveCount(e){u().setCaveCount(this.playerName,e)},toggleRankingsModal(e){const t=document.getElementById("standingsModal");t&&(t.classList.contains("show")?M.getOrCreateInstance(t).hide():e||M.getOrCreateInstance(t).show())},startNewGame(){a().players.length>1&&u().forests.reduce((e,t)=>e+=t.points,0)>=50&&y("gameFinished",{playerCount:a().players.length,maxPoints:u().forests.reduce((e,t)=>e=t.points>e?t.points:e,0)}),u().reset(),a().selectPlayer(a().players[0].name),this.toggleRankingsModal(!0),y("newGameStarted")},resetPlayers(){a().resetPlayers(),a().addPlayer(`${this.$t("player")} 1`),u().reinit(),this.startNewGame(),y("playerReset")}},watch:{playerName:{handler(e){if(!e){const t=a();if(t.players.length===0){const r=this.$t("player")+" 1";t.addPlayer(r),t.selectPlayer(r),u().addForest(r)}else t.selectPlayer(t.players[0].name)}},immediate:!0}},mounted(){y("newGameStarted")}},Xt=e=>($("data-v-d27d39f0"),e=e(),I(),e),es={key:0,class:"container mb-5"},ts=Xt(()=>n("div",{class:"distance-keeper position-relative"},null,-1)),ss={class:"d-flex align-items-center mt-4 border-primary border-bottom"},ns={class:"border border-2 bg-secondary text-light border-light rounded justify-content-center align-items-center d-flex me-1 position-icon"},os={class:"ms-2 fs-2"},rs={class:"d-flex align-items-center mt-4 border-primary border-bottom"},as={class:"border border-2 bg-warning text-light border-light rounded justify-content-center align-items-center d-flex me-1 position-icon"},ls={class:"ms-2 fs-2"},is={class:"d-flex align-items-center mt-4 border-primary border-bottom"},ds={class:"border border-2 bg-info text-light border-light rounded justify-content-center align-items-center d-flex me-1 position-icon"},cs={class:"ms-2 fs-2"},ms={class:"mt-4"},gs={class:"text-center"},us=["alt"],hs={class:"text-center d-flex align-items-center"},fs=["value"],ps={key:0,class:"ms-3"},ys={key:0,class:"mt-2 mb-3 d-flex align-items-center"},bs={for:"caveType",class:"form-label me-3 mb-0"},_s=["value"],vs={class:"px-4 mt-3"},ks={id:"standingsModal",class:"modal fade",tabindex:"-1"},xs={class:"modal-dialog"},ws={class:"modal-content"},Cs={class:"modal-header"},Ps={class:"fs-1"},Es={class:"modal-body"},Ss={class:"modal-footer d-flex justify-content-between"},Ns={class:"flex-grow-1 text-end"};function $s(e,t,r,f,p,s){const g=_("NavigationAndButtons"),l=_("CardAmountEditorList"),o=_("font-awesome-icon"),N=_("ForestSummary"),A=_("Ranking");return i(),d(k,null,[m(g,{onToggleStandings:s.toggleRankingsModal,onStartNewGame:s.startNewGame,onResetPlayers:s.resetPlayers},null,8,["onToggleStandings","onStartNewGame","onResetPlayers"]),s.forest?(i(),d("div",es,[ts,m(l,{cards:s.trees,forest:s.forest,symbol:"tree",heading:"trees"},null,8,["cards","forest"]),m(l,{cards:s.shrubs,forest:s.forest,symbol:"shrub",heading:"shrubs",class:"mt-4"},null,8,["cards","forest"]),n("div",ss,[n("div",ns,[m(o,{icon:"arrow-up"})]),n("span",os,c(e.$t("tops")),1)]),m(l,{class:"mt-1",cards:s.birdsTop,forest:s.forest,symbol:"bird",heading:"birds"},null,8,["cards","forest"]),m(l,{class:"mt-4",cards:s.butterflies,forest:s.forest,symbol:"butterfly",heading:"butterflies"},null,8,["cards","forest"]),m(l,{class:"mt-4",cards:s.others,forest:s.forest,symbol:"pawedAnimal",heading:"pawedAnimals"},null,8,["cards","forest"]),m(l,{class:"mt-4",cards:s.plantsTop,forest:s.forest,symbol:"plant",heading:"plants"},null,8,["cards","forest"]),n("div",rs,[n("div",as,[m(o,{icon:"arrow-down"})]),n("span",ls,c(e.$t("bottoms")),1)]),m(l,{class:"mt-1",cards:s.plants,forest:s.forest,symbol:"plant",heading:"plants"},null,8,["cards","forest"]),m(l,{class:"mt-4",cards:s.mushrooms,forest:s.forest,symbol:"mushroom",heading:"mushrooms"},null,8,["cards","forest"]),m(l,{class:"mt-4",cards:s.amphibians,forest:s.forest,symbol:"amphibian",heading:"amphibians"},null,8,["cards","forest"]),m(l,{class:"mt-4",cards:s.insectsBottom,forest:s.forest,symbol:"insect",heading:"insects"},null,8,["cards","forest"]),m(l,{class:"mt-4",cards:s.pawedBottom,forest:s.forest,symbol:"pawedAnimal",heading:"pawedAnimals"},null,8,["cards","forest"]),n("div",is,[n("div",ds,[m(o,{icon:"arrows-left-right"})]),n("span",cs,c(e.$t("sides")),1)]),s.birdsSide.length>0?(i(),L(l,{key:0,class:"mt-2",cards:s.birdsSide,forest:s.forest,symbol:"bird",heading:"birds"},null,8,["cards","forest"])):h("",!0),m(l,{class:"mt-2",cards:s.insectsSide,forest:s.forest,symbol:"insect",heading:"insects"},null,8,["cards","forest"]),m(l,{class:"mt-4",cards:s.bats,forest:s.forest,symbol:"bat",heading:"bats"},null,8,["cards","forest"]),m(l,{class:"mt-4",cards:s.pawedSide,forest:s.forest,symbol:"pawedAnimal",heading:"pawedAnimals"},null,8,["cards","forest"]),m(l,{class:"mt-4",cards:s.deerAndCloven,forest:s.forest,symbol:"deer",symbol2:"clovenHoofedAnimal",heading:"deerAndCloven"},null,8,["cards","forest"]),n("div",ms,[n("div",gs,[n("img",{src:"./img/cave.png",height:"128px",alt:e.$t("cave"),onClick:t[0]||(t[0]=b=>s.setCaveCount(s.forest.caveCount+1))},null,8,us)]),n("div",hs,[n("input",{value:s.forest.caveCount,onInput:t[1]||(t[1]=b=>s.setCaveCount(Number(b.target.value))),type:"number",class:"form-control text-center fs-5",min:"0",onfocus:"this.select();",onclick:"this.select();"},null,40,fs),s.explorationExpansion?(i(),d("div",ps,"("+c(s.forest.calculateCavePoints())+")",1)):h("",!0)]),s.explorationExpansion?(i(),d("div",ys,[n("label",bs,c(e.$t("caveType"))+":",1),R(n("select",{id:"caveType","onUpdate:modelValue":t[2]||(t[2]=b=>s.selectedCaveType=b),class:"form-select"},[(i(!0),d(k,null,C(s.caveTypes,b=>(i(),d("option",{key:b,value:b},c(e.$t(b)),9,_s))),128))],512),[[z,s.selectedCaveType]])])):h("",!0)]),n("div",vs,[m(N,{forest:s.forest},null,8,["forest"])])])):h("",!0),n("div",ks,[n("div",xs,[n("div",ws,[n("div",Cs,[n("div",Ps,c(e.$t("ranking")),1),n("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:t[3]||(t[3]=b=>s.toggleRankingsModal(!0))})]),n("div",Es,[m(A,{onToggleStandings:s.toggleRankingsModal},null,8,["onToggleStandings"])]),n("div",Ss,[n("div",null,[n("button",{class:"d-block btn btn-danger btn-sm",onClick:t[4]||(t[4]=(...b)=>s.startNewGame&&s.startNewGame(...b))},c(e.$t("startNewGame")),1),n("button",{class:"mt-1 btn btn-danger btn-sm",onClick:t[5]||(t[5]=(...b)=>s.resetPlayers&&s.resetPlayers(...b))},c(e.$t("resetPlayers")),1)]),n("div",Ns,[n("button",{class:"btn btn-primary",onClick:t[6]||(t[6]=b=>s.toggleRankingsModal(!0))},"OK")])])])])])],64)}const Vs=w(Zt,[["render",$s],["__scopeId","data-v-d27d39f0"]]);export{Vs as default};
